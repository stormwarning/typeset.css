//
// Internal mixins & functions.
//
// @package Typeset.css
//

//
// Strip units from values.
//
// @access private
// @param (str) $unit A value with a unit
// @example
//   _strip-units(10px);
//
@function _strip-units($unit) {

  @return $unit / ($unit * 0 + 1);

}

//
// Font-size & line-height.
//
// Generates a rem-based font-size with pixel value fallback, as well as a
// unitless line-height, based on base font settings.
//
// @example
//   .class {
//     @include typ-font-size(12px);
//   }
// @since 0.0.2
//
@mixin typ-font-size($typ-font-size, $typ-line-height: auto) {

  font-size: $typ-font-size;
  font-size: ($typ-font-size / $base-font-size) * 1rem;

  @if $typ-line-height == auto {

    line-height: ceil($typ-font-size / $base-line-height) * ($base-line-height / $typ-font-size);

  } @else {

    @if (type-of($typ-line-height) == number or $typ-line-height == inherit or $typ-line-height == normal) {

      line-height: $typ-line-height;

    } @elseif ($typ-line-height != none and $typ-line-height != false) {

      @warn "✘ ‘#{$typ-line-height}’ is not a valid value for `line-height`.";

    }

  }

}

//
// Font-size with calc() & vw units.
//
// @param $min-font  (str) Minimum font-size
// @param $max-font  (str) Maximum font-size
// @param $min-width (str) Minimum browser width
// @param $max-width (str) Maximum browser width
//
@mixin typ-calc-size($min-font, $max-font, $min-width, $max-width) {

  $unitless-min-font: _strip-units($min-font);
  $unitless-max-font: _strip-units($max-font);
  $unitless-min-width: _strip-units($min-width);
  $unitless-max-width: _strip-units($max-width);

  font-size: $min-font;

  @media (min-width: $min-width) {
    font-size: calc(#{$min-font} + (#{$unitless-max-font} - #{$unitless-min-font}) * ((100vw - #{$min-width}) / (#{$unitless-max-width} - #{$unitless-min-width})));
  }

  @media (min-width: $max-width) {
    font-size: $max-font;
  }

}
